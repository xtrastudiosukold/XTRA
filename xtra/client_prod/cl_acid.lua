local a = {
    cols = {
        [16] = {r = 55, g = 55, b = 55},
        [18] = {r = 55, g = 55, b = 135},
        [24] = {r = 55, g = 95, b = 135},
        [52] = {r = 95, g = 55, b = 55},
        [67] = {r = 95, g = 135, b = 175},
        [88] = {r = 135, g = 55, b = 55},
        [95] = {r = 135, g = 95, b = 95},
        [124] = {r = 175, g = 55, b = 55},
        [133] = {r = 175, g = 95, b = 175},
        [173] = {r = 215, g = 135, b = 95},
        [203] = {r = 255, g = 95, b = 95},
        [210] = {r = 255, g = 135, b = 135},
        [216] = {r = 255, g = 175, b = 135},
        [222] = {r = 255, g = 215, b = 135},
        [231] = {r = 255, g = 255, b = 255}
    },
    bits = {
        {
            133,
            133,
            133,
            133,
            88,
            88,
            88,
            88,
            88,
            88,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            88,
            124,
            222,
            222,
            124,
            124,
            124,
            88,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            88,
            124,
            231,
            231,
            203,
            203,
            203,
            124,
            88,
            133,
            133,
            133,
            133,
            133,
            133,
            88,
            88,
            88,
            88,
            88,
            88,
            88,
            203,
            203,
            124,
            88,
            88,
            133,
            133,
            133,
            88,
            124,
            203,
            203,
            203,
            203,
            124,
            124,
            88,
            203,
            203,
            124,
            124,
            88,
            133,
            133,
            88,
            88,
            88,
            88,
            88,
            88,
            88,
            88,
            88,
            124,
            203,
            203,
            124,
            88,
            133,
            133,
            133,
            133,
            95,
            231,
            231,
            210,
            231,
            231,
            210,
            88,
            88,
            88,
            88,
            88,
            133,
            133,
            133,
            133,
            95,
            231,
            67,
            216,
            67,
            231,
            210,
            210,
            52,
            52,
            95,
            133,
            133,
            133,
            133,
            133,
            95,
            231,
            16,
            216,
            16,
            231,
            216,
            210,
            52,
            52,
            216,
            95,
            133,
            133,
            133,
            95,
            216,
            216,
            216,
            216,
            216,
            216,
            216,
            52,
            52,
            52,
            216,
            95,
            133,
            133,
            133,
            16,
            210,
            216,
            216,
            210,
            210,
            16,
            216,
            216,
            52,
            210,
            95,
            133,
            133,
            133,
            16,
            16,
            16,
            210,
            210,
            16,
            16,
            16,
            16,
            216,
            210,
            210,
            52,
            52,
            133,
            133,
            133,
            133,
            16,
            16,
            16,
            16,
            16,
            216,
            216,
            210,
            210,
            52,
            52,
            133,
            133,
            133,
            133,
            133,
            133,
            95,
            210,
            210,
            210,
            210,
            210,
            210,
            95,
            133,
            133,
            133,
            133,
            133,
            133,
            95,
            95,
            24,
            18,
            88,
            88,
            88,
            18,
            18,
            88,
            88,
            88,
            133,
            133,
            133,
            95,
            231,
            24,
            18,
            124,
            124,
            124,
            18,
            24,
            203,
            203,
            203,
            124,
            88,
            133,
            95,
            231,
            222,
            18,
            124,
            203,
            203,
            18,
            24,
            124,
            95,
            95,
            95,
            203,
            124,
            88,
            95,
            222,
            222,
            18,
            124,
            124,
            124,
            18,
            24,
            95,
            231,
            231,
            231,
            95,
            124,
            88,
            133,
            95,
            18,
            24,
            18,
            18,
            18,
            24,
            95,
            231,
            231,
            231,
            231,
            222,
            95,
            88,
            133,
            133,
            18,
            222,
            67,
            67,
            222,
            222,
            95,
            231,
            231,
            231,
            222,
            222,
            95,
            133,
            133,
            52,
            52,
            222,
            67,
            67,
            222,
            222,
            67,
            95,
            222,
            222,
            222,
            95,
            133,
            133,
            52,
            173,
            173,
            52,
            24,
            67,
            67,
            67,
            67,
            24,
            95,
            95,
            95,
            52,
            133,
            133,
            52,
            95,
            95,
            173,
            52,
            67,
            24,
            24,
            67,
            67,
            24,
            24,
            18,
            95,
            52,
            133,
            52,
            52,
            95,
            95,
            52,
            24,
            24,
            18,
            24,
            67,
            67,
            67,
            18,
            95,
            52,
            52,
            52,
            52,
            95,
            95,
            52,
            24,
            18,
            18,
            18,
            24,
            24,
            67,
            18,
            95,
            95,
            52,
            133,
            52,
            52,
            95,
            52,
            18,
            133,
            133,
            133,
            18,
            18,
            24,
            18,
            173,
            95,
            52,
            133,
            52,
            52,
            52,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            18,
            18,
            173,
            95,
            52,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            52,
            52,
            133
        },
        {
            133,
            133,
            133,
            133,
            88,
            88,
            88,
            88,
            88,
            88,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            88,
            124,
            222,
            222,
            124,
            124,
            124,
            88,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            88,
            124,
            231,
            231,
            203,
            203,
            203,
            124,
            88,
            133,
            133,
            133,
            133,
            133,
            133,
            88,
            88,
            88,
            88,
            88,
            88,
            88,
            203,
            203,
            124,
            88,
            88,
            133,
            133,
            133,
            88,
            124,
            203,
            203,
            203,
            203,
            124,
            124,
            88,
            203,
            203,
            124,
            124,
            88,
            133,
            133,
            88,
            88,
            88,
            88,
            88,
            88,
            88,
            88,
            88,
            124,
            203,
            203,
            124,
            88,
            133,
            133,
            133,
            133,
            95,
            231,
            231,
            210,
            231,
            231,
            210,
            88,
            88,
            88,
            88,
            88,
            133,
            133,
            133,
            133,
            95,
            231,
            67,
            216,
            67,
            231,
            210,
            210,
            52,
            52,
            95,
            133,
            133,
            133,
            133,
            133,
            95,
            231,
            16,
            216,
            16,
            231,
            216,
            210,
            52,
            52,
            216,
            95,
            133,
            133,
            133,
            95,
            216,
            216,
            216,
            216,
            216,
            216,
            216,
            52,
            52,
            52,
            216,
            95,
            133,
            133,
            133,
            16,
            210,
            216,
            216,
            210,
            210,
            16,
            216,
            216,
            52,
            210,
            95,
            133,
            133,
            133,
            16,
            16,
            16,
            210,
            210,
            16,
            16,
            16,
            16,
            216,
            210,
            210,
            52,
            52,
            133,
            133,
            133,
            133,
            16,
            16,
            16,
            16,
            16,
            216,
            216,
            210,
            210,
            52,
            52,
            133,
            133,
            133,
            133,
            133,
            133,
            95,
            210,
            210,
            210,
            210,
            210,
            210,
            95,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            18,
            88,
            88,
            88,
            18,
            18,
            88,
            88,
            88,
            133,
            133,
            133,
            133,
            133,
            95,
            18,
            124,
            124,
            124,
            18,
            95,
            95,
            95,
            203,
            203,
            88,
            133,
            133,
            133,
            95,
            231,
            18,
            124,
            203,
            203,
            95,
            231,
            231,
            231,
            95,
            203,
            203,
            88,
            133,
            133,
            95,
            222,
            18,
            124,
            124,
            95,
            231,
            231,
            231,
            231,
            222,
            95,
            124,
            88,
            133,
            133,
            95,
            18,
            24,
            18,
            18,
            95,
            231,
            231,
            231,
            222,
            222,
            95,
            124,
            88,
            133,
            133,
            133,
            18,
            222,
            67,
            67,
            222,
            95,
            222,
            222,
            222,
            95,
            88,
            88,
            133,
            133,
            133,
            133,
            18,
            222,
            67,
            67,
            222,
            222,
            95,
            95,
            95,
            24,
            24,
            18,
            133,
            133,
            133,
            18,
            24,
            24,
            67,
            67,
            24,
            24,
            67,
            67,
            24,
            24,
            18,
            133,
            133,
            133,
            133,
            52,
            52,
            24,
            24,
            24,
            24,
            18,
            24,
            67,
            67,
            24,
            18,
            52,
            133,
            133,
            52,
            173,
            173,
            52,
            24,
            24,
            24,
            18,
            24,
            24,
            24,
            24,
            52,
            95,
            52,
            133,
            52,
            95,
            95,
            173,
            52,
            24,
            18,
            133,
            18,
            24,
            24,
            24,
            52,
            95,
            52,
            133,
            133,
            52,
            95,
            95,
            95,
            52,
            133,
            133,
            133,
            52,
            52,
            52,
            173,
            95,
            52,
            133,
            133,
            133,
            52,
            95,
            95,
            52,
            133,
            133,
            52,
            173,
            173,
            95,
            95,
            52,
            133,
            133,
            133,
            133,
            133,
            52,
            52,
            52,
            133,
            133,
            52,
            52,
            52,
            52,
            52,
            133,
            133,
            133
        },
        {
            133,
            133,
            133,
            133,
            88,
            88,
            88,
            88,
            88,
            88,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            88,
            124,
            222,
            222,
            124,
            124,
            124,
            88,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            88,
            124,
            231,
            231,
            203,
            203,
            203,
            124,
            88,
            133,
            133,
            133,
            133,
            133,
            133,
            88,
            88,
            88,
            88,
            88,
            88,
            88,
            124,
            203,
            124,
            88,
            88,
            133,
            133,
            133,
            88,
            124,
            203,
            203,
            203,
            203,
            124,
            124,
            88,
            203,
            203,
            124,
            124,
            88,
            133,
            133,
            88,
            88,
            88,
            88,
            88,
            88,
            88,
            88,
            88,
            124,
            203,
            203,
            124,
            88,
            133,
            133,
            133,
            133,
            95,
            231,
            231,
            210,
            231,
            231,
            210,
            88,
            88,
            88,
            88,
            88,
            133,
            133,
            133,
            133,
            95,
            231,
            67,
            216,
            67,
            231,
            210,
            210,
            52,
            52,
            95,
            133,
            133,
            133,
            133,
            133,
            95,
            231,
            16,
            216,
            16,
            231,
            216,
            210,
            52,
            52,
            210,
            95,
            133,
            133,
            133,
            95,
            216,
            216,
            216,
            216,
            216,
            216,
            216,
            52,
            52,
            52,
            210,
            95,
            133,
            133,
            133,
            16,
            210,
            216,
            216,
            210,
            210,
            16,
            216,
            216,
            52,
            210,
            95,
            133,
            133,
            133,
            16,
            16,
            16,
            210,
            210,
            16,
            16,
            16,
            16,
            216,
            210,
            210,
            52,
            52,
            133,
            133,
            133,
            133,
            16,
            16,
            16,
            16,
            16,
            216,
            216,
            210,
            210,
            52,
            52,
            133,
            133,
            133,
            133,
            133,
            133,
            95,
            210,
            210,
            210,
            210,
            210,
            210,
            95,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            18,
            88,
            95,
            95,
            95,
            88,
            88,
            88,
            88,
            133,
            133,
            133,
            133,
            133,
            133,
            18,
            88,
            95,
            231,
            231,
            231,
            95,
            203,
            203,
            124,
            88,
            133,
            133,
            133,
            133,
            133,
            18,
            95,
            231,
            231,
            231,
            231,
            222,
            95,
            203,
            203,
            88,
            133,
            133,
            133,
            133,
            18,
            88,
            95,
            231,
            231,
            231,
            222,
            222,
            95,
            203,
            124,
            88,
            133,
            133,
            133,
            133,
            18,
            18,
            18,
            95,
            222,
            222,
            222,
            95,
            124,
            124,
            124,
            88,
            133,
            133,
            133,
            133,
            18,
            222,
            67,
            222,
            95,
            95,
            95,
            88,
            88,
            88,
            88,
            18,
            133,
            133,
            133,
            133,
            18,
            222,
            67,
            222,
            222,
            67,
            24,
            24,
            24,
            24,
            24,
            18,
            133,
            133,
            133,
            133,
            133,
            18,
            67,
            67,
            67,
            67,
            67,
            24,
            24,
            24,
            18,
            133,
            133,
            133,
            133,
            133,
            133,
            18,
            24,
            18,
            67,
            67,
            67,
            24,
            24,
            24,
            18,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            18,
            24,
            18,
            67,
            24,
            24,
            24,
            18,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            18,
            18,
            18,
            18,
            18,
            18,
            18,
            18,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            52,
            95,
            52,
            173,
            173,
            95,
            95,
            52,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            52,
            95,
            52,
            173,
            173,
            95,
            95,
            95,
            52,
            133,
            133,
            133,
            133,
            133,
            133,
            133,
            52,
            52,
            52,
            52,
            52,
            52,
            52,
            52,
            52,
            133,
            133,
            133,
            133
        }
    }
}
local b = {}
local c = 0
local d
local e
local f
local g
local h = 1
local i = 0
local j = 15
local k = 0
local l = 1
local m = -20.0
local n = 0.01
RegisterNetEvent(
    "XTRA:doAcid",
    function()
        local o = "mp_player_inteat@burger"
        local p = "mp_player_int_eat_burger"
        local q = tXTRA.loadModel("a_c_hen")
        RequestAnimDict(o)
        while not HasAnimDictLoaded(o) do
            Wait(0)
        end
        TaskPlayAnim(tXTRA.getPlayerPed(), o, p, 2.0, 2.0, -1, 51, 0, false, false, false)
        RemoveAnimDict(o)
        local r = tXTRA.getPlayerPed()
        local s, t, u = table.unpack(GetEntityCoords(r))
        local v = CreatePed(5, q, s, t, u + 0.2, 0.0, false, true)
        AttachEntityToEntity(
            v,
            r,
            GetPedBoneIndex(r, 18905),
            0.13,
            0.05,
            0.02,
            00.0,
            0.0,
            0.0,
            true,
            true,
            false,
            true,
            1,
            true
        )
        SetModelAsNoLongerNeeded(q)
        SetTimeout(
            2000,
            function()
                DeletePed(v)
                ClearPedTasks(r)
            end
        )
        DoAcid(20000)
    end
)
DoAcid = function(w)
    local x = w and w >= 200000 and 2 or 1
    SendNUIMessage({type = "playMusic", song = x})
    InitCubes()
    local y = 0
    local z = GetGameTimer()
    local A = tXTRA.getPlayerPed()
    local B = GetEntityCoords(A)
    while GetGameTimer() - z < w do
        local C = GetEntityCoords(tXTRA.getPlayerPed())
        local D = GetVecDist(B, C)
        if D > 1.0 then
            y = y + 1
            if y == 5 then
                y = 0
                local E = B - C
                local F = GetEntityVelocity(tXTRA.getPlayerPed())
                SetEntityCoordsNoOffset(tXTRA.getPlayerPed(), C.x + E.x, C.y + E.y, C.z)
                ForcePedMotionState(tXTRA.getPlayerPed(), -1115154469, 1, 1, 0)
                SetEntityVelocity(tXTRA.getPlayerPed(), F.x, F.y, F.z)
            end
            B = GetEntityCoords(tXTRA.getPlayerPed())
        end
        DrawToons()
        DrawCubes()
        if e and not f then
            f = true
            Citizen.CreateThread(InitPed)
        end
        Wait(0)
    end
    ClearTimecycleModifier()
    ShakeGameplayCam("DRUNK_SHAKE", 0.0)
    SetPedMotionBlur(tXTRA.getPlayerPed(), false)
    SetEntityAsMissionEntity(g, true, true)
    DeleteEntity(g)
    SendNUIMessage({type = "stopMusic"})
    b = {}
    c = 0
    d = nil
    e = nil
    f = nil
    g = nil
    h = 1
    i = 0
    j = 15
    k = 0
    l = 1
    m = -20.0
    n = 0.01
end
InitPed = function()
    local G = tXTRA.getPlayerPed()
    local H = GetEntityCoords(G)
    local I = math.random(0, 359)
    local J = math.random(50, 80)
    local K = H + PointOnSphere(0.0, I, J)
    while GetScreenCoordFromWorldCoord(K.x, K.y, K.z) and not IsPointOnRoad(K.x, K.y, K.z) do
        I = math.random(0, 359)
        J = math.random(50, 80)
        K = GetEntityCoords(tXTRA.getPlayerPed()) + PointOnSphere(0.0, I)
        Citizen.Wait(0)
    end
    g = ClonePed(G, GetEntityHeading(G), false, false)
    Wait(10)
    SetEntityCoordsNoOffset(g, K.x, K.y, K.z + 1.0)
    SetPedComponentVariation(g, 1, 60, 0, 0)
    SetEntityInvincible(g, true)
    SetBlockingOfNonTemporaryEvents(g, true)
    TrackEnt()
end
TrackEnt = function()
    while true do
        local D = GetVecDist(GetEntityCoords(tXTRA.getPlayerPed()), GetEntityCoords(g))
        if D > 5.0 then
            TaskGoToEntity(g, tXTRA.getPlayerPed(), -1, 4.0, 100.0, 1073741824, 0)
            Wait(1000)
        else
            if not IsTaskMoveNetworkActive(g) then
                RequestAnimDict("anim@mp_point")
                while not HasAnimDictLoaded("anim@mp_point") do
                    Wait(0)
                end
                TaskMoveNetworkByName(g, "task_mp_pointing", 0.5, 0, "anim@mp_point", 24)
                SetPedCurrentWeaponVisible(g, 0, 1, 1, 1)
                SetPedConfigFlag(g, 36, 1)
            end
            RemoveAnimDict("anim@mp_point")
            if not d or GetGameTimer() - d > 1000 then
                d = GetGameTimer()
                TaskTurnPedToFaceEntity(g, tXTRA.getPlayerPed(), -1)
            end
            SetTaskMoveNetworkSignalFloat(g, "Pitch", 0.4)
            SetTaskMoveNetworkSignalFloat(g, "Heading", 0.5)
            SetTaskMoveNetworkSignalBool(g, "isBlocked", false)
            SetTaskMoveNetworkSignalBool(g, "isFirstPerson", false)
            if IsPedRagdoll(g) then
                while IsPedRagdoll(g) do
                    Wait(0)
                end
                ClearPedTasksImmediately(g)
                Wait(10)
            end
            Wait(0)
        end
    end
end
InitCubes = function()
    for L = 1, 50, 1 do
        local M = math.random(5, 255)
        local N = math.random(5, 255)
        local O = math.random(5, 255)
        local P = math.random(50, 100)
        local s = math.random(1, 180)
        local t = math.random(1, 359)
        local u = math.random(15, 35)
        b[L] = {pos = PointOnSphere(s, t, u), points = {x = s, y = t, z = u}, col = {r = M, g = N, b = O, a = P}}
    end
    ShakeGameplayCam("DRUNK_SHAKE", 0.0)
    SetTimecycleModifierStrength(0.0)
    SetTimecycleModifier("BikerFilter")
    SetPedMotionBlur(tXTRA.getPlayerPed(), true)
    local Q = 4000
    local R = 0
    while R < Q do
        R = R + 1
        local C = GetEntityCoords(tXTRA.getPlayerPed())
        local S = 0.1 * R / 40
        SetTimecycleModifierStrength(math.min(0.1 * R / (Q / 40), 1.5))
        ShakeGameplayCam("DRUNK_SHAKE", math.min(0.1 * R / (Q / 40), 1.5))
        for T, U in pairs(b) do
            local H = C + U.pos
            DrawBox(H.x + S, H.y + S, H.z + S, H.x - S, H.y - S, H.z - S, U.col.r, U.col.g, U.col.g, U.col.a)
            local V = {x = U.points.x + 0.1, y = U.points.y + 0.1, z = U.points.z}
            b[T].points = V
            b[T].pos = PointOnSphere(V.x, V.y, V.z)
        end
        Wait(0)
    end
end
DrawCubes = function()
    local W = GetEntityCoords(tXTRA.getPlayerPed())
    local S = 10
    for T, U in pairs(b) do
        local X = 0.1
        local Y = 0.1
        if T % 4 == 0 then
            Y = -0.1
        elseif T % 3 == 0 then
            X = -0.1
        elseif T % 2 == 0 then
            X = -0.1
            Y = -0.1
        end
        local H = W + U.pos
        DrawBox(H.x + S, H.y + S, H.z + S, H.x - S, H.y - S, H.z - S, U.col.r, U.col.g, U.col.g, U.col.a)
        local V = {x = U.points.x + X, y = U.points.y + Y, z = U.points.z}
        b[T].points = V
        b[T].pos = PointOnSphere(V.x, V.y, V.z)
    end
end
DrawToons = function()
    local G = tXTRA.getPlayerPed()
    local C = GetEntityCoords(G)
    local Z = vector3(C.x + 35.0, C.y - 8.0, C.z)
    local _ = vector3(C.x - 35.0, C.y - 8.0, C.z)
    if GetGameTimer() - i > 1000 then
        i = GetGameTimer()
        h = h + l
        if h > #a.bits then
            l = -1
            h = 2
        elseif h <= 0 then
            h = 2
            l = 1
        end
    end
    DrawMario(Z)
    DrawMario(_)
end
DrawMario = function(a0)
    local a1 = 0
    local a2 = 0
    if m < 0.0 then
        m = m + n
    end
    for T = #a.bits[h], 1, -1 do
        local U = a.bits[h][T]
        local H = vector3(a0.x, a0.y + a2, a0.z + a1)
        local a3 = a.cols[U]
        if k < 255 then
            if not e then
                e = true
            end
            k = k + 0.001
        end
        if U ~= 133 then
            DrawBox(
                H.x + 0.5,
                H.y + 0.5,
                H.z + 0.5 + m,
                H.x - 0.5,
                H.y - 0.5,
                H.z - 0.5 + m,
                a3.r,
                a3.g,
                a3.b,
                math.floor(k)
            )
        end
        a2 = a2 + 1
        if a2 > j then
            a2 = 0
            a1 = a1 + 1
        end
    end
end
GetVecDist = function(a4, a5)
    if not a4 or not a5 or not a4.x or not a5.x then
        return 0
    end
    return math.sqrt(
        ((a4.x or 0) - (a5.x or 0)) * ((a4.x or 0) - (a5.x or 0)) +
            ((a4.y or 0) - (a5.y or 0)) * ((a4.y or 0) - (a5.y or 0)) +
            ((a4.z or 0) - (a5.z or 0)) * ((a4.z or 0) - (a5.z or 0))
    )
end
PointOnSphere = function(a6, a7, a8, a9, aa, ab)
    local ac = 0.017453292384744
    a6, a7, a8, a9, aa, ab =
        (tonumber(a6 or 0) or 0) * ac,
        (tonumber(a7 or 0) or 0) * ac,
        tonumber(a8 or 0) or 0,
        tonumber(a9 or 0) or 0,
        tonumber(aa or 0) or 0,
        tonumber(ab or 0) or 0
    if vector3 then
        return vector3(
            a9 + a8 * math.sin(a7) * math.cos(a6),
            aa + a8 * math.cos(a7) * math.cos(a6),
            ab + a8 * math.sin(a6)
        )
    end
end
local ad = false
local ae = false
RegisterNetEvent(
    "XTRA:cocaineEffect",
    function()
        if ad then
            ae = true
            local s = 0
            while s < 10 do
                tXTRA.varyHealth(-10)
                tXTRA.notify("I don't feel too good..")
                Wait(5000)
                s = s + 1
            end
            SetRunSprintMultiplierForPlayer(PlayerId(), 1.00)
            ae = false
            ClearTimecycleModifier()
        else
            PrepareMusicEvent("EXL3_FIGHT_OS")
            TriggerMusicEvent("EXL3_FIGHT_OS")
            SetTimecycleModifier("Barry1_Stoned")
            SetRunSprintMultiplierForPlayer(PlayerId(), 1.40)
            ad = true
            Wait(30000)
            SetRunSprintMultiplierForPlayer(PlayerId(), 1.00)
            ad = false
            if not ae then
                ClearTimecycleModifier()
            end
        end
    end
)
RegisterNetEvent(
    "XTRA:heroinEffect",
    function()
        PrepareMusicEvent("HALLOWEEN_START_MUSIC")
        TriggerMusicEvent("HALLOWEEN_START_MUSIC")
        RequestAnimSet("anim_group_move_ballistic")
        while not HasAnimSetLoaded("anim_group_move_ballistic") do
            Wait(0)
        end
        SetPedMovementClipset(PlayerPedId(), "anim_group_move_ballistic", 0.2)
        RemoveAnimSet("anim_group_move_ballistic")
        SetTimecycleModifier("DRUG_gas_huffin")
        tXTRA.enablePunching(true)
        Wait(30000)
        ClearTimecycleModifier()
        tXTRA.enablePunching(false)
        TriggerMusicEvent("BST_STOP")
        ResetPedMovementClipset(PlayerPedId())
    end
)
