import{r as m,a as n,j as e,F as b}from"./jsx-runtime-f40812bf.js";import{b as L,L as a,C as _,h as te,i as W,j as q,k as U,m as M,n as w,c as y,o as ce,p as V,q as ae,r as re,t as Y,v as p,f as g,d as Q,w as ie,x as le,y as oe,z as ne,A as de,B as J,D as me,E as Ne,F as ue,G as Ce,H as Pe,J as he}from"./Phone-eb89da6c.js";import{r as Z}from"./number-28525126.js";function ve(){const{View:P,Contact:O}=m.useContext(x),o=L(y.Settings),N=L(y.PhoneNumber),[i,C]=m.useState(null),[v,h]=P,[t,r]=O,d=L(p.APPS.PHONE.contacts),[c,E]=m.useState(!1),[u,k]=m.useState(!1);m.useEffect(()=>C(t.number),[]);const F=()=>{g("Phone",{action:"removeContact",number:t.number}).then(()=>{p.APPS.PHONE.contacts.set(d.filter(s=>s.number!==t.number)),r(null),h("Contacts")})},T=()=>{g("Phone",{action:"toggleBlock",number:t.number,blocked:!t.blocked}).then(()=>{r({...t,blocked:!t.blocked}),p.APPS.PHONE.contacts.set(d.map(s=>s.number===t.number?{...s,blocked:!s.blocked}:s))})},H=()=>{g("Phone",{action:"toggleFavourite",number:t.number,favourite:!t.favourite}).then(()=>{r({...t,favourite:!t.favourite}),p.APPS.PHONE.contacts.set(d.map(s=>s.number===t.number?{...s,favourite:!s.favourite}:s))})},I=()=>{if(!t.number||t.number.length===0)return h("Contacts");t.number===N?(y.Settings.patch({name:t.firstname,avatar:t.avatar??o.avatar}),g("setPhoneName",t.firstname),g("setSettings",y.Settings.value),E(s=>!s),p.APPS.PHONE.contacts.set(d.map(s=>s.number===t.number?{...s,...t}:s))):(t.lastname=t.lastname??"",g("Phone",{action:"updateContact",data:{...t,oldNumber:i}}).then(()=>{E(s=>!s),p.APPS.PHONE.contacts.set(d.map(s=>s.number===t.number?{...s,...t}:s)),C(t.number)}))},R=()=>{t&&_.PopUp.set({title:a("APPS.MESSAGES.SEND_LOCATION_POPUP.TITLE"),description:a("APPS.MESSAGES.SEND_LOCATION_POPUP.TEXT"),buttons:[{title:a("APPS.MESSAGES.SEND_LOCATION_POPUP.CANCEL")},{title:a("APPS.MESSAGES.SEND_LOCATION_POPUP.SEND"),cb:()=>{g("Maps",{action:"getCurrentLocation"}).then(s=>{s&&g("Messages",{action:"sendMessage",number:t.number,content:`<!SENT-LOCATION-X=${Z(s.x,2)}Y=${Z(s.y,2)}!>`,attachments:[]}).then(l=>{l?y.App.set({name:"Messages",data:{number:t.number,name:t.firstname&&M(t.firstname,t.lastname),avatar:t.avatar},view:"messages"}):Q("warning","something went wrong while sending location")})})}}]})},B=m.useRef(!0);return m.useEffect(()=>{B.current&&B.current&&(C(t.number),B.current=!1,k(t.number===N))},[t]),n("div",{className:"slide left",children:[e("div",{className:"contacts-header",children:n("div",{className:"items",children:[c?e("span",{}):n("div",{className:"back",onClick:()=>{h(t.from),r(null)},children:[e("i",{className:"fal fa-chevron-left"}),a(`APPS.PHONE.${t.from.toUpperCase()}.TITLE`)]}),t.firstname&&!t.company&&e("span",{onClick:()=>{c?I():E(s=>!s)},children:c?a("APPS.PHONE.DONE"):a("APPS.PHONE.EDIT")})]})}),e("div",{className:"content",children:c?e(b,{children:n("div",{className:"contact nohover",children:[n("div",{className:"user",onClick:()=>{var s,l,A;_.Gallery.set({allowExternal:(A=(l=(s=te)==null?void 0:s.value)==null?void 0:l.AllowExternal)==null?void 0:A.Other,onSelect:D=>r({...t,avatar:D.src})})},children:[t.avatar||u&&o.avatar?e("div",{className:"profile-image bigger",style:{backgroundImage:`url(${t.avatar??o.avatar})`}}):t.firstname?e("div",{className:"profile-image bigger",children:W(t.firstname,t.lastname)}):e(q,{}),e("span",{children:a("APPS.PHONE.EDIT")})]}),n("div",{className:"contact-info",children:[e("div",{className:"item input",children:e(U,{type:"text",placeholder:a("APPS.PHONE.CONTACTS.FIRST_NAME"),value:t.firstname,onChange:s=>r({...t,firstname:s.target.value}),maxLength:20})}),!u&&e("div",{className:"item input",children:e(U,{type:"text",placeholder:a("APPS.PHONE.CONTACTS.LAST_NAME"),value:t.lastname??"",onChange:s=>r({...t,lastname:s.target.value}),maxLength:20})})]}),e("div",{className:"contact-info",children:e("div",{className:"item input",children:e(U,{className:"phone_number",type:"number",placeholder:a("APPS.PHONE.CONTACTS.PHONE_NUMBER"),defaultValue:t==null?void 0:t.number,maxLength:20,disabled:u,onChange:s=>{if(u)return;let l=s.target.value.slice(-1).charCodeAt(0);l>=48&&l<=57&&s.target.value.length<=10&&r({...t,number:s.target.value})}})})}),n("div",{className:"contact-info",children:[e("div",{className:"item input",children:e(U,{className:"phone_number",type:"email",placeholder:a("APPS.PHONE.CONTACTS.EMAIL"),defaultValue:t==null?void 0:t.email,maxLength:20,disabled:u,onChange:s=>{u||s.target.value.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i)&&r({...t,email:s.target.value})}})}),e("div",{className:"item input",children:e(U,{type:"text",placeholder:a("APPS.PHONE.CONTACTS.ADDRESS"),defaultValue:t==null?void 0:t.address,maxLength:20,disabled:u,onChange:s=>{u||r({...t,address:s.target.value})}})})]}),!u&&e("div",{className:"contact-info",children:e("div",{className:"item red",onClick:()=>{_.PopUp.set({title:a("APPS.PHONE.CONTACTS.REMOVE_CONTACT_TITLE"),description:a("APPS.PHONE.CONTACTS.REMOVE_CONTACT_TEXT"),buttons:[{title:a("APPS.PHONE.CONTACTS.REMOVE_CONTACT_BUTTON_CANCEL")},{title:a("APPS.PHONE.CONTACTS.REMOVE_CONTACT_BUTTON_DELETE"),color:"red",cb:F}]})},children:a("APPS.PHONE.CONTACTS.DELETE_CONTACT")})})]})}):e(b,{children:n("div",{className:"contact nohover details",children:[n("div",{className:"user",children:[t.avatar||u&&o.avatar?e("div",{className:"profile-image bigger",style:{backgroundImage:`url(${u?o.avatar:t.avatar})`}}):t.firstname?e("div",{className:"profile-image bigger",children:W(t.firstname,t.lastname)}):e(q,{}),e("div",{className:"name",children:t.firstname?M(t.firstname,t.lastname):w(t.number)})]}),n("div",{className:"actions",children:[n("div",{className:"item","data-disabled":!!(u||t.company),onClick:()=>{y.App.set({name:"Messages",data:{number:t.number,name:t.firstname&&M(t.firstname,t.lastname),avatar:t.avatar},view:"messages"})},children:[e(ce,{}),a("APPS.PHONE.CONTACTS.MESSAGE")]}),n("div",{className:"item call","data-disabled":u,onClick:()=>{V({number:t.number,company:t.company,companylabel:t.company&&t.firstname})},children:[e(ae,{}),a("APPS.PHONE.CONTACTS.CALL")]}),n("div",{className:"item","data-disabled":!!(u||t.company),onClick:()=>{V({number:t.number,company:t.company,companylabel:t.company&&t.firstname,videoCall:!0})},children:[e(re,{}),a("APPS.PHONE.CONTACTS.VIDEO")]})]}),!t.company&&n(b,{children:[e("div",{className:"contact-info",children:n("div",{className:"item",onClick:()=>Y(t.number),children:[e("div",{className:"title",children:a("APPS.PHONE.CONTACTS.MAIN")}),e("div",{className:"value",children:w(t.number)})]})}),(t.email||t.address)&&n("div",{className:"contact-info",children:[t.email&&n("div",{className:"item",onClick:()=>Y(t.email),children:[e("div",{className:"title",children:a("APPS.PHONE.CONTACTS.EMAIL").toLowerCase()}),e("div",{className:"value",children:t.email})]}),t.address&&n("div",{className:"item",onClick:()=>Y(t.address),children:[e("div",{className:"title",children:a("APPS.PHONE.CONTACTS.ADDRESS").toLowerCase()}),e("div",{className:"value",children:t.address})]})]}),e("div",{className:"contact-info",children:t.firstname?n(b,{children:[e("div",{className:"item",onClick:()=>{_.Share.set({type:"contact",data:{firstname:t.firstname,lastname:t.lastname,number:t.number,avatar:t.avatar??o.avatar}})},children:a("APPS.PHONE.CONTACTS.SHARE_CONTACT")}),!u&&n(b,{children:[e("div",{className:"item",onClick:()=>R(),children:a("APPS.PHONE.CONTACTS.SHARE_LOCATION")}),t.favourite?e("div",{className:"item red",onClick:()=>{H()},children:a("APPS.PHONE.CONTACTS.REMOVE_FAVORITE")}):e("div",{className:"item",onClick:()=>{H()},children:a("APPS.PHONE.CONTACTS.ADD_FAVORITE")})]})]}):e("div",{className:"item",onClick:()=>{h("NewContact")},children:a("APPS.PHONE.CONTACTS.ADD_CONTACT")})}),!u&&e("div",{className:"contact-info",children:t.blocked?e("div",{className:"item red",onClick:()=>{_.PopUp.set({title:a("APPS.PHONE.CONTACTS.UNBLOCK_NUMBER_TITLE"),description:a("APPS.PHONE.CONTACTS.UNBLOCK_NUMBER_TEXT").format({number:w(t.number)}),buttons:[{title:a("APPS.PHONE.CONTACTS.UNBLOCK_NUMBER_BUTTON_CANCEL")},{title:a("APPS.PHONE.CONTACTS.UNBLOCK_NUMBER_BUTTON_UNBLOCK"),cb:()=>{T()}}]})},children:a("APPS.PHONE.CONTACTS.UNBLOCK_CALLER")}):e("div",{className:"item red",onClick:()=>{_.PopUp.set({title:a("APPS.PHONE.CONTACTS.BLOCK_NUMBER_TITLE"),description:a("APPS.PHONE.CONTACTS.BLOCK_NUMBER_TEXT").format({number:w(t.number)}),buttons:[{title:a("APPS.PHONE.CONTACTS.BLOCK_NUMBER_BUTTON_CANCEL")},{title:a("APPS.PHONE.CONTACTS.BLOCK_NUMBER_BUTTON_BLOCK"),color:"red",cb:()=>{T()}}]})},children:a("APPS.PHONE.CONTACTS.BLOCK_CALLER")})})]})]})})})]})}function Ee(){const{View:P,viewContact:O}=m.useContext(x),o=L(y.Settings),[N,i]=P,C=L(y.PhoneNumber),v=L(p.APPS.PHONE.contacts),h=[],[t,r]=m.useState("");return n("div",{className:"slide right",children:[n("div",{className:"contacts-header",children:[n("div",{className:"items",children:[e("div",{className:"title",children:a("APPS.PHONE.CONTACTS.TITLE")}),e(ie,{onClick:()=>{i("NewContact")}})]}),e(le,{placeholder:a("SEARCH"),onChange:d=>r(d.target.value)})]}),n("div",{className:"content",children:[e("div",{className:"letters",children:[...Array(26)].map((d,c)=>{let E=String.fromCharCode(c+65);return e("a",{children:E},c)})}),e("div",{className:"contact nohover",onClick:()=>{O({firstname:o==null?void 0:o.name,number:C},"Contacts")},children:n("div",{className:"profile",children:[o!=null&&o.avatar?e("img",{src:o==null?void 0:o.avatar,alt:"avatar"}):e("div",{className:"profile-image",children:o==null?void 0:o.name.split(" ").map(d=>{var c;return(c=d==null?void 0:d[0])==null?void 0:c.toUpperCase()}).join("")}),n("div",{className:"profile-info",children:[e("div",{className:"name",children:o==null?void 0:o.name}),e("div",{className:"info",children:a("APPS.PHONE.CONTACTS.MY_CARD")})]})]})}),v&&n(b,{children:[v.filter(d=>M(d.firstname,d.lastname).toLowerCase().includes(t.toLowerCase())).sort((d,c)=>d.firstname.localeCompare(c.firstname)).map((d,c)=>{let E=d.firstname.charAt(0).toUpperCase();return h.includes(E)?e("div",{className:"contact border",onClick:()=>O(d,"Contacts"),children:M(d.firstname,d.lastname)}):(h.push(E),n("div",{children:[e("div",{id:E,className:`divider ${h.length==1?"no-border":""}`,children:E}),e("div",{className:"contact border",onClick:()=>O(d,"Contacts"),children:M(d.firstname,d.lastname)})]},c))}),n("div",{className:"total-contacts",children:[v.length," ",a("APPS.PHONE.CONTACTS.TITLE")]})]})]})]})}function Ae(){const{viewContact:P}=m.useContext(x),O=L(p.APPS.PHONE.contacts),[o,N]=m.useState(!1);return n("div",{className:"slide right",children:[e("div",{className:"contacts-header",children:n("div",{className:"items",children:[e("div",{className:"title",children:a("APPS.PHONE.FAVOURITES.TITLE")}),e("span",{onClick:()=>N(!o),children:o?a("APPS.PHONE.DONE"):a("APPS.PHONE.EDIT")})]})}),e("div",{className:"content",children:e("div",{className:"favourite",children:O.filter(i=>i.favourite||i.company).sort((i,C)=>i.company?-1:1).map((i,C)=>{let v=M(i.firstname,i.lastname);return n("div",{className:"item",onClick:()=>{_.PopUp.set({title:a("APPS.PHONE.CALL.CALL_TITLE").format({name:v}),description:a("APPS.PHONE.CALL.CALL_TEXT").format({name:v}),buttons:[{title:a("APPS.PHONE.CALL.CALL_BUTTON_CANCEL")},{title:a("APPS.PHONE.CALL.CALL_BUTTON_CALL"),cb:()=>{V({number:i.number,company:i.company,companylabel:i.firstname})}}]})},children:[n("div",{className:"user",children:[o&&!i.company&&e(oe,{onClick:h=>{h.stopPropagation(),_.PopUp.set({title:a("APPS.PHONE.FAVOURITES.REMOVE_TITLE"),description:a("APPS.PHONE.FAVOURITES.REMOVE_TEXT"),buttons:[{title:a("APPS.PHONE.FAVOURITES.REMOVE_BUTTON_CANCEL")},{title:a("APPS.PHONE.FAVOURITES.REMOVE_BUTTON_REMOVE"),color:"red",cb:()=>{g("Phone",{action:"toggleFavourite",number:i.number,favourite:!1}).then(t=>{p.APPS.PHONE.contacts.set(O.map(r=>r.number===i.number?{...r,favourite:!r.favourite}:r))})}}]})}}),i.avatar?e("div",{className:"avatar",style:{backgroundImage:`url(${i.avatar})`}}):e("div",{className:"avatar",children:W(i.firstname,i.lastname)}),n("div",{className:"info",children:[v,e("span",{children:w(i.number)})]})]}),e(ne,{onClick:h=>{h.stopPropagation(),P(i,"Favourites")}})]},C)})})})]})}const f=[697,770,852,941],S=[1209,1336,1477,1633],ee={1:[f[0],S[0]],2:[f[0],S[1]],3:[f[0],S[2]],4:[f[1],S[0]],5:[f[1],S[1]],6:[f[1],S[2]],7:[f[2],S[0]],8:[f[2],S[1]],9:[f[2],S[2]],"*":[f[3],S[0]],0:[f[3],S[1]],"#":[f[3],S[2]]},Oe=[{key:"1",letters:""},{key:"2",letters:"ABC"},{key:"3",letters:"DEF"},{key:"4",letters:"GHI"},{key:"5",letters:"JKL"},{key:"6",letters:"MNO"},{key:"7",letters:"PQRS"},{key:"8",letters:"TUV"},{key:"9",letters:"WXYZ"},{key:"*",letters:""},{key:"0",letters:"+"},{key:"#",letters:""}],z={0:2.5,12:2,17:1.75};function Te(){const{View:P,Contact:O,viewContact:o}=m.useContext(x),[N,i]=P,[C,v]=O,[h,t]=m.useState(null),[r,d]=m.useState(""),c=m.useRef(null),E=m.useRef([]),u=m.useRef(null),k=m.useRef(null),[F,T]=m.useState(2.5);m.useEffect(()=>{c.current||(c.current=new AudioContext)},[]),m.useEffect(()=>{document.addEventListener("keydown",B),document.addEventListener("keyup",s),r==="0"&&T(2.5);let l=0;for(let A=0;A<Object.keys(z).length;A++)r.length>=parseInt(Object.keys(z)[A])&&(l=z[Object.keys(z)[A]]);return T(l),()=>{document.removeEventListener("keydown",B),document.removeEventListener("keyup",s)}},[r]);const H=l=>{if(!c.current)return;const A=c.current,[D,X]=ee[l],K="sine",$=A.createOscillator();$.frequency.value=D,$.type=K;const G=A.createOscillator();G.frequency.value=X,G.type=K;const j=A.createGain();j.gain.value=.2,$.connect(j),G.connect(j),j.connect(A.destination),$.start(),G.start();const se=setTimeout(()=>{I()},1500);E.current.push([$,G,j,se])},I=async()=>{E.current.forEach(([l,A,D,X])=>{clearTimeout(X);const K=c.current;K&&(clearTimeout(X),D.gain.exponentialRampToValueAtTime(1e-4,K.currentTime+.1),setTimeout(()=>{l.stop(),A.stop(),l.disconnect(),A.disconnect(),D.disconnect()},100))}),u.current=null,E.current=[]},R=async l=>{l=="delete"?d(A=>A.slice(0,-1)):l.match(/^[0-9]+$/)&&d(A=>A+l),ee[l]&&(u.current&&await I(),u.current=l,H(l))},B=l=>{if(!u.current)if(l.key.match(/^[0-9]+$/))u.current=l.key,R(l.key);else switch(l.key){case"Backspace":R("delete");break;case"Enter":r.length>=3&&V({number:r});break}},s=l=>{l.key===u.current&&I()};return m.useEffect(()=>{if(r.length!==de())return t(null);t(J(r))},[r]),e("div",{className:"slide right",children:e("div",{className:"content noscroll",children:n("div",{className:"keypad-container",children:[n("div",{className:"inputbox",children:[e("div",{className:"input",style:{fontSize:`${F}rem`},children:w(r)}),e("span",{onClick:()=>{if(d(""),h)o(h,"Keypad");else{let l=J(r);l?(v({...l,number:r}),i("NewContact")):(v({number:r}),i("NewContact"))}},children:r.length>0&&(h?h.name:a("APPS.PHONE.KEYPAD.ADD_NUMBER"))})]}),e("div",{className:"keypad-wrapper",children:n("div",{className:"keypad",children:[Oe.map(l=>n("div",{onMouseDown:()=>R(l.key),onMouseUp:()=>I(),children:[l.key,l.letters&&e("span",{children:l.letters})]},l.key)),e("span",{}),e("div",{className:"call",onClick:()=>{r.length>=3&&V({number:r})},children:e(ae,{})}),e("div",{className:"delete",onMouseDown:()=>{R("delete"),k.current&&clearInterval(k.current);const l=setInterval(()=>{R("delete")},100);k.current=l},onMouseUp:()=>{k.current&&(clearInterval(k.current),k.current=null)},children:e(me,{})})]})})]})})})}function fe(){const{Func:P}=m.useContext(Ne),{View:O,Contact:o}=m.useContext(x),N=L(y.PhoneNumber),[i]=o,[C,v]=O,h=L(p.APPS.PHONE.contacts),t=L(y.Settings),[r,d]=P.TextColor;d(t.display.theme=="dark"?"#ffffff":"#000000");const[c,E]=m.useState(null),[u,k]=m.useState(!1);m.useEffect(()=>{i&&i.number&&E({...c,number:i.number})},[i]),m.useEffect(()=>{c&&k(c.firstname&&c.number!==void 0)},[c]);const F=()=>{if(c){if(!c.number||(c==null?void 0:c.number)===N)return v("Contacts");c.lastname=(c==null?void 0:c.lastname)??"",g("Phone",{action:"saveContact",data:c}).then(T=>{if(!T)return Q("warning","Failed to save contact");p.APPS.PHONE.contacts.set([...h,c]),v("Contacts")})}};return n("div",{className:"slide up",children:[e("div",{className:"contacts-header",children:n("div",{className:"items",children:[e("div",{className:"back",onClick:()=>v("Contacts"),children:a("APPS.PHONE.CANCEL")}),e("span",{className:u?"":"disabled",onClick:()=>{u&&F()},children:a("APPS.PHONE.DONE")})]})}),e("div",{className:"content",children:e(b,{children:n("div",{className:"contact nohover",children:[e("div",{className:"user",onClick:()=>{var T,H,I;_.Gallery.set({allowExternal:(I=(H=(T=te)==null?void 0:T.value)==null?void 0:H.AllowExternal)==null?void 0:I.Other,onSelect:R=>E({...c,avatar:R.src})})},children:c!=null&&c.avatar?n(b,{children:[e("div",{className:"profile-image bigger transparent",style:{backgroundImage:`url(${c.avatar})`}}),e("span",{children:a("APPS.PHONE.EDIT")})]}):n(b,{children:[e(q,{className:"big"}),e("span",{className:"add",children:a("APPS.PHONE.CONTACTS.ADD_PHOTO")})]})}),n("div",{className:"contact-info",children:[e("div",{className:"item input",children:e(U,{type:"text",placeholder:a("APPS.PHONE.CONTACTS.FIRST_NAME"),onChange:T=>E({...c,firstname:T.target.value}),maxLength:20})}),e("div",{className:"item input",children:e(U,{type:"text",placeholder:a("APPS.PHONE.CONTACTS.LAST_NAME"),onChange:T=>E({...c,lastname:T.target.value}),maxLength:20})})]}),e("div",{className:"contact-info",children:e("div",{className:"item input",children:e(U,{className:"phone_number",type:"number",placeholder:a("APPS.PHONE.CONTACTS.PHONE_NUMBER"),defaultValue:i==null?void 0:i.number,maxLength:15,onChange:T=>{let H=T.target.value.slice(-1).charCodeAt(0);H>=48&&H<=57&&E({...c,number:T.target.value})}})})})]})})})]})}function Se(){const{viewContact:P}=m.useContext(x),[O,o]=m.useState([]);return m.useEffect(()=>{g("Phone",{action:"getRecent",page:0}).then(N=>{N&&o(N)})},[]),n("div",{className:"slide right",children:[e("div",{className:"contacts-header",children:e("div",{className:"items",children:e("div",{className:"title",children:a("APPS.PHONE.RECENTS.TITLE")})})}),e("div",{className:"content",children:e("div",{className:"recent-calls",children:O.map((N,i)=>n("div",{className:`item${!N.called&&!N.answered?" missed":""}`,onClick:()=>{if(N.hideCallerId)return;let C;N.name?C=N.name:C=w(N.number),_.PopUp.set({title:a("APPS.PHONE.CALL.CALL_TITLE").format({name:C}),description:a("APPS.PHONE.CALL.CALL_TEXT").format({name:C}),buttons:[{title:a("APPS.PHONE.CALL.CALL_BUTTON_CANCEL")},{title:a("APPS.PHONE.CALL.CALL_BUTTON_CALL"),cb:()=>{V({number:N.number})}}]})},children:[e("div",{className:"user",children:N.hideCallerId?n(b,{children:[a("APPS.PHONE.CALL.NO_CALLER_ID"),e("span",{children:a("APPS.PHONE.CALL.UNKNOWN")})]}):N.name?n(b,{children:[N.name,e("span",{children:w(N.number)})]}):n(b,{children:[w(N.number),e("span",{children:a("APPS.PHONE.CALL.UNKNOWN")})]})}),n("div",{className:"info",children:[e("div",{className:"date",children:ue(N.timestamp)}),e(ne,{onClick:C=>{if(C.stopPropagation(),N.hideCallerId)return Q("info","Call info couldn't be loaded since user called with 'No Caller ID'");if(N.name){let v=J(N.number);v&&P({...v,number:N.number},"Recents")}else P({...N},"Recents")}})]})]},i))})})]})}const x=m.createContext(null);function ge(){const P=L(y.App),[O,o]=m.useState("Contacts"),[N,i]=m.useState(null),C=L(p.APPS.PHONE.contacts),v=(r,d)=>{i({...r,from:d}),o("Contact")};m.useEffect(()=>{if(C&&P!=null&&P.data)if(P.view==="contact"){let r=C==null?void 0:C.find(d=>d.number==P.data);if(!r)return;i({...r||{number:P.data},from:"Contacts"}),o("Contact")}else P.view==="newContact"&&(i({number:P.data,from:"Contacts"}),o("NewContact"))},[]);const h={Favourites:e(Ae,{}),Contacts:e(Ee,{}),Recents:e(Se,{}),Keypad:e(Te,{}),NewContact:e(fe,{}),Contact:e(ve,{})},t={Favourites:e(Ce,{}),Recents:e(Pe,{}),Contacts:e(q,{}),Keypad:e(he,{})};return n("div",{className:"phone-app-container",children:[e(x.Provider,{value:{Contact:[N,i],View:[O,o],viewContact:v},children:e("div",{className:"wrapper",children:h[O]})}),e("div",{className:"footer",children:Object.keys(t).map((r,d)=>{let c=O==r?"active":"";return n("div",{className:`item ${c}`,onClick:()=>o(r),children:[t[r],e("span",{children:a(`APPS.PHONE.${r.toUpperCase()}.TITLE`)})]},d)})})]})}export{x as PhoneContext,ge as default};
